'use strict';var KallpaCSRF={TOKEN_COOKIE_NAME:"Alfresco-CSRFToken",TOKEN_HEADER_NAME:"Alfresco-CSRFToken",getToken:function(){return this.getCookie(this.TOKEN_COOKIE_NAME)},getHeaders:function(a){var b={"Content-Type":"application/json"},d=this.getToken();d&&(b[this.TOKEN_HEADER_NAME]=d);if(a)for(var c in a)b[c]=a[c];return b},fetch:function(a,b){b=b||{};b.headers=this.getHeaders(b.headers);console.log("\ud83d\udd12 KallpaCSRF: Enviando request con token CSRF");return fetch(a,b).then(function(d){403===
d.status&&console.warn("\ud83d\udeab CSRF: Request bloqueada (403)");return d})},getCookie:function(a){a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return c.substring(a.length,c.length)}return null},checkStatus:function(){var a=this.getToken();console.log("\ud83d\udd0d CSRF Status:",{tokenPresent:!!a,tokenValue:a?a.substring(0,8)+"...":"None"});return!!a}};window.KallpaCSRF=KallpaCSRF;
